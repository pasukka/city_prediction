# Полное описание работы программы

## Используемые файлы

- `config.yml`: содержит необходимые параметры для работы программы
	- `llm`: используемая модель
    - `huggingface-hub-token`: токен для доступа к модели
    - `prompt_template`: путь до шаблона инструкции для модели
    - `log_prompts`: если true, то выводит в консоль инструкцию для каждого сообщения
    - `log_llm_responses`: если true, то выводит ответ модели для каждого сообщения
    - `show_sentence`: если true, то выводит анализируемое сообщение клиента
- `data.csv`: входной файл, содержащий сообщения клиентов по заказу доставки цветов
- `output_data.csv`: выходной файл, в который будет записываться результат (с новым столбцом `city` - название города, в котором клиент хочет сделать доставку)
- `result_data.csv`: файл, содержащий полученные результаты (является переименованным файлом `output_data.csv`)
- `prompts/`: папка, содержащая инструкции для модели
- `description.md`: файл, содержащий подробное описание действий
- `requirements.txt`: файл, содержащий  необходимые модули для установки


## Описание работы программы



## Комментарии по заданию

### Изменение названия выходного файла
В тестовом задании в качестве выходного файла был указан `data.csv`, являющийся также и входным. Было принято решение изменить название выходного файла для того, чтобы была возможность тестировать несколько моделей. В таком случае входной файл является неизменным, а выодной файл при необходимости можно удалять или переименовывать.

### Пополнение файла по строкам, а не целиком
Поскольку huggingface ограничивает использование моделей токенами, а также количеством запросов, может возникать ошибка в середине работы программы. Для сохранения уже полученного результата было принято решение пополнять файл построчно, что нивелирует вышеуказанную проблему.

### Нур-Султан vs Астана
В 2019-2022 годы город Астана назывался Нур-Султан. Поскольку не до конца понятно существует ли необходимость в выводе `Астана` в предложениях, где указан `Нур-Султан`, было решено оставить этот момент нетронутым.
В качестве идей можно рассмотреть следующее.  Во-первых, можно в основной иструкции просить модель выводить современные названия городов. Во-вторых, можно составить дополнительную проверку названия на актуальность, используя либо дополнительную инструкцию, либо подключить некоторую базу данных (например, WikiData).

### Результаты моделей

#### Большая модель mistral (mistralai/Mixtral-8x7B-Instruct-v0.1)
С описанной инструкцией показывает полные и точные результаты: выводит только то, что нужно, и не ошибается с определением города. 

#### Небольшая модель mistral (mistralai/Mistral-7B-Instruct-v0.2)
С той же инструкцией показывает более плохие результаты. Например, указывает `Петроград/Санкт-Петербург` вместо `Санкт-Петербург` или `НСК (Нальчик, Сочи, Краснодар, Ставропо` вместо `Новосибирск`.

